(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var i=n((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"add",(function(t){e._listener.push(t)})),r(this,"remove",(function(t){e._listener=e._listener.filter((function(e){return e!==t}))})),r(this,"emit",(function(t){e._listener.forEach((function(e){return e(t)}))})),this._listener=[]}));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function u(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"onChangeActiveBtns",new i),u(this,"onChangeLengthOfTextarea",new i),u(this,"onChangeLocalStorageData",new i),u(this,"onChangeTextareaContent",new i),u(this,"onChangeLang",new i),u(this,"onChangeCursorPosition",new i),u(this,"onInitState",new i),this._langIndex=0,this._langMap=["en","ru"],this._textareaContent="",this._textareaRow=[""],this._cursor={line:0,pos:0,number:0},this._keys={},this._activeBtns={},this._lastControl={id:null,time:null},this._activeControls={},this._lastKey=null,this._capsLock=!1,this._maxLengthOfTextarea=77}var e,n;return e=t,(n=[{key:"setInitState",value:function(t){var e=t.keys,n=t.langIndex;this._langIndex=n,this._keys=e,this.onInitState.emit({keys:e,lang:this._langMap[this._langIndex]})}},{key:"maxLengthOfTextarea",get:function(){return this._maxLengthOfTextarea},set:function(t){this._maxLengthOfTextarea=t,this.onChangeLengthOfTextarea.emit(this._maxLengthOfTextarea)}},{key:"cursor",get:function(){return this._cursor},set:function(t){this._cursor=t,this.onChangeCursorPosition.emit({start:this._cursor.number,end:this._cursor.number})}},{key:"textareaRow",get:function(){return this._textareaRow},set:function(t){this._textareaRow=t}},{key:"get",value:function(){return this}},{key:"textareaContent",get:function(){return this._textareaContent},set:function(t){this._textareaContent=t,this.onChangeTextareaContent.emit(this._textareaContent)}},{key:"keys",get:function(){return this._keys},set:function(t){this._keys=t}},{key:"langIndex",get:function(){return this._langIndex},set:function(t){this._langIndex=t,this.onChangeLang.emit(this._langMap[this._langIndex]),this.onChangeLocalStorageData.emit({lang:this._langMap[this.langIndex],textareaContent:this.textareaContent,textareaRow:this.textareaRow,cursor:this.cursor})}},{key:"lang",get:function(){return this._langMap},set:function(t){this._langMap=t}},{key:"getKeyContent",value:function(t){return this._keys[t]||!1}},{key:"activeBtns",get:function(){return this._activeBtns},set:function(t){this._activeBtns=t,this.onChangeActiveBtns.emit(t)}},{key:"lastControl",get:function(){return this._lastControl},set:function(t){this._lastControl=t}},{key:"activeControls",get:function(){return this._activeControls},set:function(t){this._activeControls=t}},{key:"lastKey",get:function(){return this._lastKey},set:function(t){this._lastKey=t}},{key:"capsLock",get:function(){return this._capsLock},set:function(t){this._capsLock=t}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function p(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}var d=p((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,"getLast",(function(){return e.buffer[e.buffer.length-1]||""})),b(this,"push",(function(t){e.buffer.push(t)})),this.buffer=[]}));function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function x(t,e,n){return(e=O(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}var C=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,"prepareTextareaRow",(function(t){return t.split("\n").map((function(t){return"".concat(t,"\n")})).map((function(n){if(n.length<=e.maxRowLength)return n;for(var r=[],o=n;o.length>e.maxRowLength;){var i=77===e.maxRowLength?o.match(/.{1,77}/g):60===e.maxRowLength?o.match(/.{1,60}/g):52===e.maxRowLength?o.match(/.{1,52}/g):o.match(/.{1,30}/g),a=i[0].lastIndexOf(" ");-1!==a?(r.push(o.slice(0,a+1)),o=t.slice(a+1)):(r.push(i[0].slice(0,-1)),o=t.slice(e.maxRowLength-1))}return r.push(o),r})).flat()})),x(this,"setCursorPosition",(function(t){e.cursor=w({number:t},e.findCursorPosition(t))})),x(this,"findCursorPosition",(function(t){for(var n=0,r={},o=0;o<e.textareaRow.length;o+=1){if(t-n<e.textareaRow[o].length){r.line=o,r.pos=t-n;break}n+=e.textareaRow[o].length}return r})),x(this,"deleteSymbol",(function(t){var n=e.cursor,r=n.line,o=n.pos,i=n.number;if(i===e.textareaContent.length){if("prev"===t){var a=e.textareaContent.slice(0,-1);e.textareaContent=a,e.textareaRow=e.prepareTextareaRow(e.textareaContent),e.cursor={number:e.textareaContent.length,line:e.textareaRow.length-1,pos:e.textareaRow[e.textareaRow.length-1].length}}}else if("prev"===t){if(0!==i){e.textareaContent=e.textareaContent.slice(0,i-1)+e.textareaContent.slice(i),e.textareaRow=e.prepareTextareaRow(e.textareaContent);var c=e.findCursorPosition(i-1);e.cursor=w({number:i-1},c)}}else i<e.textareaContent.length&&(e.textareaContent=e.textareaContent.slice(0,i)+e.textareaContent.slice(i+1),e.textareaRow=e.prepareTextareaRow(e.textareaContent),e.cursor={number:i,line:r,pos:o})})),x(this,"saveSelect",(function(t,n){var r=Math.min(t,n),o=Math.max(t,n),i=e.textareaContent.slice(r,o);e.buffer.push(i)})),x(this,"cutSelect",(function(t,n){var r=Math.min(t,n),o=Math.max(t,n),i=e.textareaContent.slice(r,o);e.buffer.push(i),e.textareaContent=e.textareaContent.slice(0,r)+e.textareaContent.slice(o),e.textareaRow=e.prepareTextareaRow(e.textareaContent);var a=e.findCursorPosition(r);e.cursor=w({number:r},a)})),this.textareaContent="",this.textareaRow=[],this.cursor={line:0,pos:0,number:0},this.maxRowLength=77,this.buffer=new d,this.selectPosition=null}var e,n;return e=t,(n=[{key:"addSymbol",value:function(t){var e=this.cursor.number;if(e===this.textareaContent.length){var n=this.textareaContent+t;this.textareaContent=n,this.textareaRow=this.prepareTextareaRow(this.textareaContent);var r=this.findCursorPosition(e+t.length);this.cursor=w({number:e+t.length},r)}else{this.textareaContent=this.textareaContent.slice(0,e)+t+this.textareaContent.slice(e),this.textareaRow=this.prepareTextareaRow(this.textareaContent);var o=this.findCursorPosition(e+t.length);this.cursor=w({number:e+t.length},o)}}},{key:"replaceSelect",value:function(t,e,n){var r=Math.min(t,e),o=Math.max(t,e);this.textareaContent=this.textareaContent.slice(0,r)+n+this.textareaContent.slice(o),this.textareaRow=this.prepareTextareaRow(this.textareaContent);var i=this.findCursorPosition(r+n.length);this.cursor=w({number:r+n.length},i)}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var R=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controller=e,this.editor=n,this.backupTextareaContent="",this.backupCursor={line:0,pos:0,number:0},this.textareaRow=[""],this.execute=function(){return r()}}var e,n;return e=t,(n=[{key:"saveBackup",value:function(){this.backupTextareaContent=this.editor.textareaContent,this.backupCursor=this.editor.cursor,this.textareaRow=this.editor.textareaRow}},{key:"undo",value:function(){this.editor=this.backupTextareaContent}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(r){var o=T(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,(function(){return e.addSymbol(t.newSymbol),n.saveBackup(),!0}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(R);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(n);if(r){var o=B(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,(function(){return e.deleteSymbol(t.deleteDirection),n.saveBackup(),!0}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(R);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===I(o)?o:String(o)),r)}var o}var K=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.history=[e],this.activeCommandIndex=0}var e,n;return e=t,(n=[{key:"save",value:function(t){this.activeCommandIndex+=1,this.history.length>this.activeCommandIndex&&(this.history=this.history.slice(0,this.activeCommandIndex)),this.history[this.activeCommandIndex]=t}},{key:"back",value:function(){return 0!==this.activeCommandIndex&&(this.activeCommandIndex-=1,this.history[this.activeCommandIndex])}},{key:"next",value:function(){return this.activeCommandIndex+1!==this.history.length&&(this.activeCommandIndex+=1,this.history[this.activeCommandIndex])}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(n);if(r){var o=F(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e,(function(){return e.saveSelect(t.selectedTextRange.start,t.selectedTextRange.end),!1}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(R);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=J(n);if(r){var o=J(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,(function(){return e.replaceSelect(t.selectedTextRange.start,t.selectedTextRange.end,t.newSymbol),n.saveBackup(),!0}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(R);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Y(n);if(r){var o=Y(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,(function(){return e.cutSelect(t.selectedTextRange.start,t.selectedTextRange.end),n.saveBackup(),!0}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(R);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(n);if(r){var o=G(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,(function(){return e.addSymbol(t.newSymbol),n.saveBackup(),!0}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(R);function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===tt(o)?o:String(o)),r)}var o}var nt=function(){function t(e){var n=e.lang,r=void 0===n?"en":n,o=e.textareaContent,i=void 0===o?"":o,a=e.textareaRow,c=void 0===a?[""]:a,u=e.cursor,s=void 0===u?{number:0,line:0,pos:0}:u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lang=r,this.textareaContent=i,this.textareaRow=c,this.cursor=s}var e,n;return e=t,n=[{key:"toJson",value:function(t){return JSON.stringify(t)}},{key:"instanceOfISourcesLStorage",value:function(t,e){return e in t}},{key:"fromJson",value:function(e){var n={};if(null===e||"object"!==tt(e))throw new Error("Not object in localstorage");return this.instanceOfISourcesLStorage(e,"lang")&&(n.lang=e.lang),this.instanceOfISourcesLStorage(e,"textareaContent")&&(n.textareaContent=e.textareaContent),this.instanceOfISourcesLStorage(e,"textareaRow")&&(n.textareaRow=e.textareaRow),this.instanceOfISourcesLStorage(e,"cursor")&&(n.cursor=e.cursor),new t(n)}}],null&&et(e.prototype,null),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){st(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function at(t){return function(t){if(Array.isArray(t))return ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lt(r.key),r)}}function st(t,e,n){return(e=lt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lt(t){var e=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===rt(e)?e:String(e)}var ft=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),st(this,"controlCombinations",[["Control","KeyX"],["Control","KeyC"],["Control","KeyV"],["Control","KeyZ"],["Control","KeyY"],["Control","Shift"]]),st(this,"excludeKey",["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]),st(this,"toLocalStorageData",(function(t){localStorage.setItem("virtual_keyboard_by_Mi",nt.toJson(t))})),st(this,"getLocalStorageData",(function(){try{return nt.fromJson(JSON.parse(localStorage.getItem("virtual_keyboard_by_Mi")||""))}catch(t){return new nt({lang:"en",textareaContent:"",textareaRow:[""],cursor:{number:0,line:0,pos:0}})}})),st(this,"hasActiveShift",(function(){var t=Object.keys(n.activeControls).filter((function(t){return 0!==n.activeControls[t]}));return 1===t.length&&(t.includes("ShiftLeft")||t.includes("ShiftRight"))})),st(this,"symbol",(function(t,e){var r,o=e.value,i=e.value_shift;r=t.includes("Key")?n.hasActiveShift()&&!n.store.capsLock||!n.hasActiveShift()&&n.store.capsLock?i:o:n.hasActiveShift()?i:o,n.resetControls(),n.add(r)})),st(this,"delete",(function(t){n.deleteDirection="Backspace"===t?"prev":"next",n.editor.textareaContent=n.store.textareaContent,n.editor.textareaRow=n.store.textareaRow,n.editor.cursor=n.store.cursor,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.executeCommand(new D(n,n.editor)),n.store.textareaContent=n.editor.textareaContent,n.store.textareaRow=n.editor.textareaRow,n.store.cursor=n.editor.cursor,n.deleteDirection=null})),st(this,"space",(function(t,e){var r=e.value;n.add(r)})),st(this,"capsLock",(function(){var t=n.store.capsLock;n.store.capsLock=!t})),st(this,"moveCursor",(function(t){var e=t.slice(5).toLowerCase();if(n.isSelectedText){var r=Math.min(n.selectedTextRange.start,n.selectedTextRange.end),o=Math.max(n.selectedTextRange.start,n.selectedTextRange.end);if(n.editor.textareaContent=n.store.textareaContent,n.editor.textareaRow=n.store.textareaRow,n.editor.cursor=n.store.cursor,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.editor.setCursorPosition("left"===e||"up"===e?r:o),n.store.cursor=n.editor.cursor,n.isSelectedText=!1,n.isCopiedText=!1,n.selectedTextRange=null,"left"===e||"right"===e)return!0}return n.cursorHandler[e](),!0})),st(this,"add",(function(t){if(n.newSymbol=t,n.isSelectedText)return n.editor.textareaContent=n.store.textareaContent,n.editor.textareaRow=n.store.textareaRow,n.editor.cursor=n.store.cursor,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.executeCommand(new z(n,n.editor)),n.store.textareaContent=n.editor.textareaContent,n.store.textareaRow=n.editor.textareaRow,n.store.cursor=n.editor.cursor,n.isSelectedText=!1,n.isCopiedText=!1,n.selectedTextRange=null,void(n.newSymbol="");n.editor.textareaContent=n.store.textareaContent,n.editor.textareaRow=n.store.textareaRow,n.editor.cursor=n.store.cursor,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.executeCommand(new k(n,n.editor)),n.store.textareaContent=n.editor.textareaContent,n.store.textareaRow=n.editor.textareaRow,n.store.cursor=n.editor.cursor,n.newSymbol=""})),st(this,"mouseDown",(function(t,e){var r=n.store.lang[n.store.langIndex],o=n.store.getKeyContent(t),i=o.type;"control"===i?n.lastControl.id&&n.lastControl.id===t&&n.lastControl.time&&e-n.lastControl.time<300?(n.activeControls[t]=1,n.activeBtns[t]=1,n.lastKey=t):n.hasControls()?n.activeControls[t]?(n.activeControls[t]=0,n.activeBtns[t]=1,n.lastKey=t,n.lastControl={id:null,time:null}):n.hasControlCombination(t)?(n.resetControls(),n.lastControl={id:null,time:null},n.activeBtns[t]=1,n.lastKey=t):(n.activeControls[t]=0,n.activeBtns[t]=1,n.lastKey=t,n.lastControl={id:t,time:e}):(n.lastControl={id:t,time:e},n.activeBtns[t]=1,n.lastKey=t):n.hasControls()?n.hasControlCombination(t)?(n.resetControls(),n.lastControl={id:null,time:null},n.lastKey=t,n.activeBtns[t]=1):("meta"!==i&&n.editMap[i]&&n.editMap[i](t,o[r]),n.resetControls(),n.lastControl={id:null,time:null},n.lastKey=t,n.activeBtns[t]=1):(n.lastControl={id:null,time:null},n.lastKey=t,n.activeBtns[t]=1,"meta"!==i&&n.editMap[i]&&n.editMap[i](t,o[r])),n.store.activeBtns=n.activeBtns})),st(this,"mouseUp",(function(t){if(n.activeBtns=n.store.activeBtns,n.lastKey===t)if(n.hasControls())0===n.activeControls[t]&&(n.activeBtns[t]=0),n.lastKey=null;else for(var e=Object.keys(n.activeBtns),r=0;r<e.length;r+=1)n.activeBtns[e[r]]=0;else if(null!==n.lastKey)if(n.hasControls())0===n.activeControls[n.lastKey]&&(n.activeBtns[n.lastKey]=0),n.lastKey=null;else for(var o=Object.keys(n.activeBtns),i=0;i<o.length;i+=1)n.activeBtns[o[i]]=0;n.store.activeBtns=n.activeBtns})),st(this,"resetControls",(function(){n.activeControls={}})),st(this,"hasControls",(function(){return 0!==Object.keys(n.activeControls).filter((function(t){return 0!==n.activeControls[t]})).length})),st(this,"keyDown",(function(t){if(!n.excludeKey.includes(t)){var e=n.store.lang[n.store.langIndex],r=n.store.getKeyContent(t);if(r){var o=r.type;n.activeBtns=n.store.activeBtns,"control"===o?(n.hasControls()||(n.activeControls[t]=1,n.activeBtns[t]=1),n.hasControls()&&(n.activeControls[t]||n.hasControlCombination(t)||(n.activeControls[t]=1),n.activeBtns[t]=1)):n.hasControls()?(n.hasControlCombination(t)||("meta"!==o&&n.editMap[o]?n.editMap[o](t,r[e]):n.isSelectedText&&(n.isSelectedText=!1,n.isCopiedText=!1,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.setCursorFromTextarea(n.selectedTextRange.end),n.store.cursor=n.editor.cursor,n.selectedTextRange=null,n.isSelectedText=!1,n.isCopiedText=!1)),n.activeBtns[t]=1):(n.activeBtns[t]=1,"meta"!==o&&n.editMap[o]?n.editMap[o](t,r[e]):n.isSelectedText&&(n.isSelectedText=!1,n.isCopiedText=!1,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.setCursorFromTextarea(n.selectedTextRange.end),n.store.cursor=n.editor.cursor,n.selectedTextRange=null,n.isSelectedText=!1,n.isCopiedText=!1)),n.store.activeBtns=n.activeBtns}else n.isSelectedText&&(n.isSelectedText=!1,n.isCopiedText=!1,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.setCursorFromTextarea(n.selectedTextRange.end),n.store.cursor=n.editor.cursor,n.selectedTextRange=null,n.isSelectedText=!1,n.isCopiedText=!1)}})),st(this,"keyUp",(function(t){if(!n.excludeKey.includes(t))if(n.store.getKeyContent(t)){if(n.activeBtns=n.store.activeBtns,n.hasControls())n.activeBtns[t]=0,1===n.activeControls[t]&&(n.activeControls[t]=0);else{1===n.activeControls[t]&&(n.activeControls[t]=0);for(var e=Object.keys(n.activeBtns),r=0;r<e.length;r+=1)n.activeBtns[e[r]]=0}n.store.activeBtns=n.activeBtns}else n.isSelectedText&&(n.isSelectedText=!1,n.isCopiedText=!1,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.setCursorFromTextarea(n.selectedTextRange.end),n.store.cursor=n.editor.cursor,n.selectedTextRange=null,n.isSelectedText=!1,n.isCopiedText=!1)})),st(this,"upCursor",(function(){var t=n.store.cursor,e=t.line,r=t.pos,o=at(n.store.textareaRow);if(0!==e){var i=e-1,a=0;if(i>0)for(var c=0;c<i;c+=1)a+=o[c].length;o[i].length>r?(a+=r,n.store.cursor={number:a,line:i,pos:r}):(a+=o[i].length-1,n.store.cursor={number:a,line:i,pos:o[i].length-1})}})),st(this,"downCursor",(function(){var t=n.store.cursor,e=t.line,r=t.pos,o=at(n.store.textareaRow);if(e!==o.length-1){for(var i=e+1,a=0,c=0;c<i;c+=1)a+=o[c].length;if(o[i].length>r)a+=r,n.store.cursor={number:a,line:i,pos:r};else{a+=o[i].length-1;var u=o[i].length-1;n.store.cursor={number:a,line:i,pos:u}}}})),st(this,"leftCursor",(function(){var t=n.store.cursor,e=t.line,r=t.pos,o=t.number,i=at(n.store.textareaRow);if(0!==r||0!==e)if(r-1==0){var a=0;if(0!==e)for(var c=0;c<e;c+=1)a+=i[c].length;n.store.cursor={number:a,line:e,pos:0}}else if(0===r){for(var u=0,s=e-1,l=0;l<e;l+=1)u+=i[l].length;n.store.cursor={number:u-1,line:s,pos:i[s].length-1}}else{var f=o-1,y=r-1;n.store.cursor={number:f,line:e,pos:y}}})),st(this,"rightCursor",(function(){var t=n.store.cursor,e=t.line,r=t.pos,o=t.number,i=it({},n.store.textareaRow);o!==n.store.textareaContent.length&&(r+1===i[e].length?n.store.cursor={number:o+1,line:e+1,pos:0}:n.store.cursor={number:o+1,line:e,pos:r+1})})),st(this,"setCursorFromTextarea",(function(t){n.editor.textareaContent=n.store.textareaContent,n.editor.textareaRow=n.store.textareaRow,n.editor.cursor=n.store.cursor,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.editor.setCursorPosition(t),n.store.cursor=n.editor.cursor,n.isSelectedText&&(n.selectedTextRange=null,n.isSelectedText=!1,n.isCopiedText=!1)})),st(this,"selectTextRange",(function(t,e){n.selectedTextRange&&(n.selectedTextRange=null),n.selectedTextRange={start:t,end:e},n.isSelectedText=!0})),st(this,"editMap",{symbol:this.symbol,delete:this.delete,move:this.moveCursor,capslock:this.capsLock,space:this.space}),st(this,"textareaHandler",{setCursorPosition:this.setCursorFromTextarea,selectTextRange:this.selectTextRange}),st(this,"cursorHandler",{up:this.upCursor,down:this.downCursor,left:this.leftCursor,right:this.rightCursor}),st(this,"keyHandler",{mouseDown:this.mouseDown,mouseUp:this.mouseUp}),st(this,"boardHandler",{keyHandler:this.keyHandler}),st(this,"onResize",(function(t){n.maxLengthOfTextarea=t,n.store.maxLengthOfTextarea=t,n.editor.textareaContent=n.store.textareaContent,n.editor.maxRowLength=n.store.maxLengthOfTextarea,n.store.textareaRow=n.editor.prepareTextareaRow(n.store.textareaContent),n.editor.textareaRow=n.store.textareaRow,n.editor.setCursorPosition(n.store.cursor.number),n.store.cursor=n.editor.cursor,n.isSelectedText&&(n.selectedTextRange=null,n.isSelectedText=!1,n.isCopiedText=!1)})),st(this,"initKeyboard",(function(t){var e={};t.forEach((function(t){e["".concat(t.code)]=it({},t)}));var r=n.store.lang.indexOf(n.localStorageData.lang);n.store.setInitState({keys:e,langIndex:r>-1?r:0,maxLengthOfTextarea:n.maxLengthOfTextarea})})),st(this,"setActiveKey",(function(){Object.keys(n.activeBtns).forEach((function(t){0===n.activeBtns[t]&&delete n.activeBtns[t]})),n.store.activeBtns=n.activeBtns})),this.store=e,this.editor=new C,this.history=new K({backupTextareaContent:"",backupCursor:{line:0,pos:0,number:0},backupTextareaRow:[""]}),this.localStorageData=this.getLocalStorageData(),this.maxLengthOfTextarea=window.innerWidth>=1080?77:window.innerWidth>=851?60:window.innerWidth>=768?52:30,this.activeBtns={},this.lastControl={id:null,time:null},this.activeControls={},this.lastKey=null,this.newSymbol=null,this.selectedTextRange=null,this.store.onChangeLocalStorageData.add((function(t){return n.toLocalStorageData(t)}))}var e,n;return e=t,(n=[{key:"hasControlCombination",value:function(t){var e=this,n=Object.keys(this.activeControls).filter((function(t){return 0!==e.activeControls[t]}));n.push(t);for(var r=n.map((function(t){return"ShiftLeft"===t||"ShiftRight"===t?"Shift":"AltLeft"===t||"AltRight"===t?"Alt":"ControlLeft"===t||"ControlRight"===t?"Control":t})),o=0;o<this.controlCombinations.length;o+=1)if(this.controlCombinations[o].every((function(t){return r.includes(t)}))){if("ControlShift"===this.controlCombinations[o].join("")&&(this.store.langIndex=(this.store.langIndex+1)%this.store.lang.length),"ControlKeyZ"===this.controlCombinations[o].join("")){this.isSelectedText&&(this.isSelectedText=!1,this.isCopiedText=!1,this.selectedTextRange=null);var i=this.history.back();i&&(this.store.textareaContent=i.backupTextareaContent,this.store.cursor=i.backupCursor,this.store.textareaRow=i.textareaRow)}if("ControlKeyY"===this.controlCombinations[o].join("")){this.isSelectedText&&(this.isSelectedText=!1,this.isCopiedText=!1,this.selectedTextRange=null);var a=this.history.next();a&&(this.store.textareaContent=a.backupTextareaContent,this.store.cursor=a.backupCursor,this.store.textareaRow=a.textareaRow)}if("ControlKeyX"===this.controlCombinations[o].join("")&&this.isSelectedText&&(this.editor.textareaContent=this.store.textareaContent,this.editor.selectPosition=this.selectedTextRange,this.editor.maxRowLength=this.store.maxLengthOfTextarea,this.executeCommand(new Z(this,this.editor)),this.store.textareaContent=this.editor.textareaContent,this.store.textareaRow=this.editor.textareaRow,this.store.cursor=this.editor.cursor,this.isSelectedText=!1,this.isCopiedText=!1,this.selectedTextRange=null),"ControlKeyV"===this.controlCombinations[o].join("")){if(this.newSymbol=this.editor.buffer.getLast(),""===this.newSymbol)return!0;if(this.editor.textareaContent=this.store.textareaContent,this.editor.textareaRow=this.store.textareaRow,this.editor.cursor=this.store.cursor,this.editor.maxRowLength=this.store.maxLengthOfTextarea,this.isSelectedText)return this.executeCommand(new z(this,this.editor)),this.store.textareaContent=this.editor.textareaContent,this.store.textareaRow=this.editor.textareaRow,this.store.cursor=this.editor.cursor,this.isSelectedText=!1,this.isCopiedText=!1,this.selectedTextRange=null,!0;this.executeCommand(new Q(this,this.editor)),this.store.textareaContent=this.editor.textareaContent,this.store.textareaRow=this.editor.textareaRow,this.store.cursor=this.editor.cursor,this.isSelectedText=!1,this.isCopiedText=!1,this.selectedTextRange=null,this.newSymbol=""}return"ControlKeyC"===this.controlCombinations[o].join("")&&this.isSelectedText&&(this.editor.textareaContent=this.store.textareaContent,this.executeCommand(new H(this,this.editor)),this.isCopiedText=!0),!0}return!1}},{key:"executeCommand",value:function(t){t.execute()&&this.history.save(t)}}])&&ut(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==yt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===yt(o)?o:String(o)),r)}var o}var bt=function(){function t(e){var n=e.parent,r=void 0===n?null:n,o=e.tagName,i=void 0===o?"div":o,a=e.className,c=void 0===a?"":a,u=e.content,s=void 0===u?"":u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var l=document.createElement(i);l.classList=c,l.innerHTML=s,r&&r.append(l),this.node=l}var e,n;return e=t,(n=[{key:"destroy",value:function(){this.node.remove()}}])&&pt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}function mt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vt(t){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vt(t)}function wt(t){var e=function(t,e){if("object"!==ht(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ht(e)?e:String(e)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vt(n);if(r){var o=vt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mt(t)}(this,t)});function i(t){var e,n,r,a,c=t.parent,u=t.className,s=t.lang,l=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=mt(e=o.call(this,{parent:c,tagName:"header",className:"".concat(u,"__header header")})),a=function(t){e.activeLang=t,e.lang.node.textContent=e.activeLang},(r=wt(r="onChangeLang"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,e.controller=l,e.activeLang=s,e.container=new bt({parent:e.node,className:"header__container container"}),e.lang=new bt({parent:e.container.node,className:"header__lang lang",content:e.activeLang}),e.description=new bt({parent:e.container.node,className:"header__description description",content:"\n        <span>Virtual Keyboard реализована для Window OS</span>\n        <span>Для зажатия контрольной кнопки используйте двойной клик</span>\n      "}),e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(bt);function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Ot(t,e){return Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ot(t,e)}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},St(t)}function jt(t){var e=function(t,e){if("object"!==xt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===xt(e)?e:String(e)}var Rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ot(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=St(n);if(r){var o=St(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ct(t)}(this,t)});function i(t){var e,n,r,a,c=t.parent,u=t.className,s=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=Ct(e=o.call(this,{parent:c,tagName:"textarea",className:"".concat(u,"__textarea textarea")})),a=function(t){e.node.textContent=t,e.node.focus()},(r=jt(r="setContent"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,e.controller=s,e.node.addEventListener("keydown",(function(t){t.preventDefault()})),e.node.addEventListener("keyup",(function(t){t.preventDefault()})),e.node.focus(),e.node.onmouseup=function(){e.node.selectionEnd===e.node.selectionStart?e.controller.setCursorPosition(e.node.selectionEnd):e.controller.selectTextRange(e.node.selectionStart,e.node.selectionEnd)},e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(bt);function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tt(t,e){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tt(t,e)}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Et(t){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Et(t)}function Lt(t){var e=function(t,e){if("object"!==Pt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Pt(e)?e:String(e)}var Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Et(n);if(r){var o=Et(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kt(t)}(this,t)});function i(t){var e,n,r,a,c=t.parent,u=t.className,s=t.code,l=t.content,f=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=kt(e=o.call(this,{parent:c,tagName:"button",className:"".concat(u,"__btn btn ").concat(s)})),a=function(t){e.content!==t&&(e.content=t);var n,r,o=(n=e.content,r=1,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(n,r)||function(t,e){if(t){if("string"==typeof t)return _t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());e.mainContent.node.textContent=o[0],e.beforeContent.node.textContent="".concat(2===e.content.length?e.content[1]:"")},(r=Lt(r="update"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,e.code=s,e.content=l,e.controller=f,e.node.tabIndex="-1",e.beforeContent=new bt({parent:e.node,tagName:"span",className:"btn__content btn__content--before"}),e.mainContent=new bt({parent:e.node,tagName:"span",className:"btn__content btn__content--main"}),e.update(e.content),e.node.onmousedown=function(t){t.preventDefault(),e.controller.mouseDown(e.code,t.timeStamp),e.node.onmouseover=function(t){return e.node.onmouseup(t)}},e.node.onmouseup=function(t){e.controller.mouseUp(e.code,t.timeStamp),e.node.onmouseover=null},e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(bt);function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function It(t,e){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},It(t,e)}function Nt(t){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nt(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nt(n);if(r){var o=Nt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,a=t.content,c=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:a,controller:c})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Bt);function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Mt(t,e){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mt(t,e)}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(t)}var Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ft(n);if(r){var o=Ft(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===At(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,a=t.content,c=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:a,controller:c})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Bt);function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function Wt(t,e){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wt(t,e)}function Jt(t){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(t)}var zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jt(n);if(r){var o=Jt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,a=t.content,c=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:a,controller:c})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Bt);function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}var Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yt(n);if(r){var o=Yt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,a=t.content,c=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:a,controller:c})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Bt);function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function qt(t,e){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qt(t,e)}function Gt(t){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gt(t)}var Qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gt(n);if(r){var o=Gt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,a=t.content,c=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:a,controller:c})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Bt);function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ee(t,e)}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(t)}var re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ne(n);if(r){var o=ne(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,a=t.content,c=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:a,controller:c})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Bt);function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ie(t,e){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ie(t,e)}function ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ce(t)}function ue(t,e,n){return(e=se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function se(t){var e=function(t,e){if("object"!==oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===oe(e)?e:String(e)}var le={ShiftLeft:re,ShiftRight:re,ControlLeft:Zt,ControlRight:Zt,MetaLeft:Qt,AltLeft:Kt,AltRight:Kt,ArrowLeft:Ht,ArrowRight:Ht,CapsLook:zt},fe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ie(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ce(n);if(r){var o=ce(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ae(t)}(this,t)});function i(t){var e,n=t.parent,r=t.className,a=t.lang,c=t.controller;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ue(ae(e=o.call(this,{parent:n,className:"".concat(r,"__board board")})),"onChangeActiveBtns",(function(t){Object.keys(e.btns).forEach((function(t){e.btns[t].node.classList.contains("active")&&e.btns[t].node.classList.remove("active")})),Object.keys(t).forEach((function(n){t[n]&&e.btns[n].node.classList.add("active")}))})),ue(ae(e),"onChangeLang",(function(t){e.lang=t,Object.keys(e.btns).forEach((function(t){e.btns[t].update(e.keys[t]["".concat(e.lang)].name)}))})),ue(ae(e),"init",(function(t){var n=t.keys,r=t.lang;e.lang=r,e.keys=n,Object.keys(e.keys).forEach((function(t){var n=e.keys[t],r=n.row,o=n.code,i=le[o]||Bt;e.btns[o]=new i({parent:e.rows[r-1].node,className:"board",code:o,content:n["".concat(e.lang)].name,controller:e.controller.keyHandler})}))})),e.lang=a,e.controller=c,e.rows={},e.keys={},e.btns={};for(var u=0;u<5;u+=1)e.rows[u]=new bt({parent:e.node,className:"board__row row"});return e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(bt);function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function pe(t,e){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pe(t,e)}function be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function he(t){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},he(t)}function de(t,e,n){return(e=me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function me(t){var e=function(t,e){if("object"!==ye(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ye(e)?e:String(e)}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pe(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=he(n);if(r){var o=he(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return be(t)}(this,t)});function i(t){var e,n=t.parent,r=t.className,a=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),de(be(e=o.call(this,{parent:n,tagName:"main",className:"".concat(r,"__main main")})),"setFocusOnTextarea",(function(){return e.textarea.node.focus()})),de(be(e),"init",(function(t){e.board.init(t)})),de(be(e),"onChangeActiveBtns",(function(t){return e.board.onChangeActiveBtns(t)})),de(be(e),"onChangeLang",(function(t){e.board.onChangeLang(t)})),de(be(e),"onChangeTextareaContent",(function(t){e.textarea.setContent(t)})),de(be(e),"onChangeCursorPosition",(function(t){var n=t.start,r=t.end;e.textarea.node.setSelectionRange(n,r)})),de(be(e),"onInitState",(function(t){var n=t.keys,r=t.lang;e.board.init({keys:n,lang:r})})),e.controller=a,e.container=new bt({parent:e.node,className:"main__container container"}),e.textarea=new Rt({parent:e.container.node,className:r,controller:a.textareaHandler}),e.board=new fe({parent:e.container.node,className:r,lang:"en",controller:e.controller.boardHandler}),e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(bt);function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==we(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===we(o)?o:String(o)),r)}var o}var xe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=[]}var e,n;return e=t,(n=[{key:"getKeysData",value:function(){var t=this;return fetch("./data/keys.json").then((function(t){return t.json()})).then((function(e){if(!Array.isArray(e))throw new Error("Data load error");return t.data=e,t.data}))}}])&&ge(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Ce(t,e){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ce(t,e)}function Se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function je(t){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},je(t)}function Re(t){var e=function(t,e){if("object"!==Oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Oe(e)?e:String(e)}var Pe,_e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ce(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=je(n);if(r){var o=je(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Se(t)}(this,t)});function i(t){var e,n,r,a,c=t.parent,u=t.controller,s=t.store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=Se(e=o.call(this,{parent:c,className:"keyboard"})),a=function(){(new xe).getKeysData().then((function(t){e.data=t,e.controller.initKeyboard(e.data)}))},(r=Re(r="init"))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,e.controller=u,e.store=s,e.node.onresize=function(){var t=window.innerWidth>=1080?77:window.innerWidth>=851?60:window.innerWidth>=768?52:30;e.controller.onResize(t),e.main.setFocusOnTextarea()},e.data=[],e.keys=[],e.header=new gt({parent:e.node,className:"keyboard",lang:"en",controller:u}),e.main=new ve({parent:e.node,className:"keyboard",controller:e.controller}),document.addEventListener("keydown",(function(t){return e.controller.keyDown(t.code)}),!0),document.addEventListener("keyup",(function(t){return e.controller.keyUp(t.code)}),!0),document.addEventListener("click",(function(){return e.main.setFocusOnTextarea()})),e.store.onChangeTextareaContent.add((function(t){return e.main.onChangeTextareaContent(t)})),e.store.onChangeLang.add((function(t){e.header.onChangeLang(t),e.main.onChangeLang(t)})),e.store.onChangeActiveBtns.add((function(t){return e.main.onChangeActiveBtns(t)})),e.store.onChangeCursorPosition.add((function(t){return e.main.onChangeCursorPosition(t)})),e.store.onInitState.add((function(t){var n=t.keys,r=t.lang;e.header.onChangeLang(r),e.main.onInitState({keys:n,lang:r})})),e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(bt),Te=void new _e({parent:document.body,controller:new ft(Pe=new l),store:Pe}).init();window.keyboard=Te})();
//# sourceMappingURL=index.js.map