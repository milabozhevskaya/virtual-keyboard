(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var i=n((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"add",(function(t){e._listener.push(t)})),r(this,"remove",(function(t){e._listener=e._listener.filter((function(t){return t!==listener}))})),r(this,"emit",(function(t){e._listener.forEach((function(e){return e(t)}))})),this._listener=[]}));function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function a(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===c(e)?e:String(e)}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"onChangeTextareaContent",new i),a(this,"onChangeLang",new i),a(this,"onChangeCursorPosition",new i),a(this,"onInitKeys",new i),this._langIndex=0,this._langMap=["en","ru"],this._textareaContent="",this._textareaRow=[""],this._cursor={line:0,pos:0,number:0},this._keys={},this._activeBtns={},this._lastControl={id:null,time:null},this._activeControls={},this._lastKey=null,this._capsLock=!1}var e,n;return e=t,(n=[{key:"cursor",get:function(){return this._cursor},set:function(t){this._cursor=t,this.onChangeCursorPosition.emit({start:this._cursor.number,end:this._cursor.number})}},{key:"textareaRow",get:function(){return this._textareaRow},set:function(t){this._textareaRow=t}},{key:"get",value:function(){return this}},{key:"textareaContent",get:function(){return this._textareaContent},set:function(t){this._textareaContent=t,this.onChangeTextareaContent.emit(this._textareaContent)}},{key:"keys",get:function(){return this._keys},set:function(t){this._keys=t,this.onInitKeys.emit(this._keys)}},{key:"langIndex",get:function(){return this._langIndex},set:function(t){this._langIndex=t,this.onChangeLang.emit(this._langMap[this._langIndex])}},{key:"lang",get:function(){return this._langMap},set:function(t){this._langMap=t}},{key:"getKeyContent",value:function(t){return this._keys[t]}},{key:"activeBtns",get:function(){return this._activeBtns},set:function(t){this._activeBtns=t}},{key:"lastControl",get:function(){return this._lastControl},set:function(t){this._lastControl=t}},{key:"activeControls",get:function(){return this._activeControls},set:function(t){this._activeControls=t}},{key:"lastKey",get:function(){return this._lastKey},set:function(t){this._lastKey=t}},{key:"capsLock",get:function(){return this._capsLock},set:function(t){this._capsLock=t}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function h(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}var v=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"prepareTextareaRow",(function(t){return t.split("\n").map((function(t){return"".concat(t,"\n")})).map((function(n){if(n.length<=e.maxRowLength)return n;for(var r=[],o=n;o.length>77;){var i=o.match(/.{1,77}/g)[0].lastIndexOf(" ");-1!==i&&(r.push(o.slice(0,i+1)),o=t.slice(i+1))}return r.push(o),r})).flat()})),h(this,"findCursorPosition",(function(t){for(var n=0,r={},o=0;o<e.textareaRow.length;o++){if(t-n<e.textareaRow[o].length){r.line=o,r.pos=t-n;break}n+=e.textareaRow[o].length}return r})),this.textareaContent="",this.selectText="",this.textareaRow=[],this.cursor={line:0,pos:0,number:0},this.maxRowLength=77}var e,n;return e=t,(n=[{key:"addSymbol",value:function(t){var e=this.cursor,n=(e.line,e.pos,e.number);if(n===this.textareaContent.length){var r=this.textareaContent+t;this.textareaContent=r,this.textareaRow=this.prepareTextareaRow(this.textareaContent);var o=this.findCursorPosition(n+1);this.cursor=p({number:n+1},o)}else{this.textareaContent=this.textareaContent.slice(0,n)+t+this.textareaContent.slice(n),this.textareaRow=this.prepareTextareaRow(this.textareaContent);var i=this.findCursorPosition(n+1);this.cursor=p({number:n+1},i)}console.log(this.cursor)}},{key:"deleteSymbol",value:function(t){var e=this.cursor,n=e.line,r=e.pos,o=e.number;if(o===this.textareaContent.length){if("prev"===t){var i=this.textareaContent.slice(0,-1);this.textareaContent=i,this.textareaRow=this.prepareTextareaRow(this.textareaContent),this.cursor={number:this.textareaContent.length,line:this.textareaRow.length-1,pos:this.textareaRow[this.textareaRow.length-1].length}}}else if("prev"===t){if(0!==o){this.textareaContent=this.textareaContent.slice(0,o-1)+this.textareaContent.slice(o),this.textareaRow=this.prepareTextareaRow(this.textareaContent);var c=this.findCursorPosition(o-1);this.cursor=p({number:o-1},c)}}else o<this.textareaContent.length&&(this.textareaContent=this.textareaContent.slice(0,o)+this.textareaContent.slice(o+1),this.textareaRow=this.prepareTextareaRow(this.textareaContent),this.cursor={number:o,line:n,pos:r});console.log(this.cursor)}},{key:"getSelect",value:function(){return this.selectText}},{key:"deleteSelect",value:function(){this.selectText=""}},{key:"replaceSelect",value:function(t){this.selectText=t}},{key:"changeTextareaRow",value:function(){var t=this,e=this.textareaContent.split("\n").map((function(t){return"".concat(t,"\n")}));return 1===e.length&&(e[0]=e[0].slice(0,e[0].length-1)),e.map((function(e){return e.length<=t.maxRowLength?e:e.match(/.{1,77}/g)})).flat()}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var g=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controller=e,this.editor=n,this.backup="",this.backCursor={line:0,pos:0,number:0},this.textareaRow=[""],this.execute=function(){return r()}}var e,n;return e=t,(n=[{key:"saveBackup",value:function(){this.backup=this.editor.textareaContent,this.backCursor=this.editor.cursor,this.textareaRow=this.editor.textareaRow}},{key:"undo",value:function(){this.editor=this.backup}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(n);if(r){var o=C(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,(function(){return n.saveBackup(),e.addSymbol(t.newSymbol),!0}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(g);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(n);if(r){var o=x(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,(function(){return n.saveBackup(),e.deleteSymbol(t.deleteDirection),!0}))}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(g);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K(r.key),r)}}function B(t,e,n){return(e=K(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var N=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,"controlCombinations",[["Control","Delete"],["Control","Backspace"],["Control","KeyX"],["Control","KeyC"],["Control","KeyV"],["Control","KeyZ"],["Control","KeyS"],["Control","KeyA"],["Control","KeyB"],["Control","KeyI"],["Control","KeyU"],["Control","BracketLeft"],["Control","BracketRight"],["Control","KeyL"],["Control","KeyE"],["Control","KeyR"],["Control","KeyY"],["Control","Shift"]]),B(this,"excludeKey",["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]),B(this,"hasActiveShift",(function(){var t=Object.keys(n.activeControls).filter((function(t){return 0!==n.activeControls[t]}));return 1===t.length&&(t.includes("ShiftLeft")||t.includes("ShiftRight"))})),B(this,"symbol",(function(t,e){var r,o=e.value,i=e.value_shift;r=t.includes("Key")?n.hasActiveShift()&&!n.store.capsLock||!n.hasActiveShift()&&n.store.capsLock?i:o:n.hasActiveShift()?i:o,n.addTextareaContent(r)})),B(this,"delete",(function(t,e){e.value,n.deleteDirection="Backspace"===t?"prev":"next",n.editor.textareaContent=n.store.textareaContent,n.editor.textareaRow=n.store.textareaRow,n.editor.cursor=n.store.cursor,n.executeCommand(new R(n,n.editor)),n.store.textareaContent=n.editor.textareaContent,n.store.textareaRow=n.editor.textareaRow,n.store.cursor=n.editor.cursor,n.deleteDirection=null})),B(this,"space",(function(t,e){var r=e.value;n.addTextareaContent(r)})),B(this,"capsLock",(function(t,e){e.value;var r=n.store.capsLock;n.store.capsLock=!r})),B(this,"moveCursor",(function(t){var e=t.slice(5).toLowerCase();return n.cursorHandler[e](),!0})),B(this,"addTextareaContent",(function(t){n.newSymbol=t,n.editor.textareaContent=n.store.textareaContent,n.editor.textareaRow=n.store.textareaRow,n.editor.cursor=n.store.cursor,n.executeCommand(new S(n,n.editor)),n.store.textareaContent=n.editor.textareaContent,n.store.textareaRow=n.editor.textareaRow,n.store.cursor=n.editor.cursor,n.newSymbol=""})),B(this,"mouseDown",(function(t,e){var r=n.store.lang[n.store.langIndex],o=n.store.getKeyContent(t),i=o.type;"control"===i?n.lastControl.id&&n.lastControl.id===t&&n.lastControl.time&&e-n.lastControl.time<300?(n.activeControls[t]=1,n.activeBtns[t]=1,n.lastKey=t):n.hasControls()?n.activeControls[t]?(n.activeControls[t]=0,n.activeBtns[t]=1,n.lastKey=t,n.lastControl={id:null,time:null}):n.hasControlCombination(t)?(n.resetControls(),n.lastControl={id:null,time:null},n.activeBtns[t]=1,n.lastKey=t):(n.activeControls[t]=0,n.activeBtns[t]=1,n.lastKey=t,n.lastControl={id:t,time:e}):(n.lastControl={id:t,time:e},n.activeBtns[t]=1,n.lastKey=t):n.hasControls()?n.hasControlCombination(t)?(n.resetControls(),n.lastControl={id:null,time:null},n.lastKey=t,n.activeBtns[t]=1):("meta"!==i&&n.editMap[i]&&n.editMap[i](t,o[r]),n.resetControls(),n.lastControl={id:null,time:null},n.lastKey=t,n.activeBtns[t]=1):(n.lastControl={id:null,time:null},n.lastKey=t,n.activeBtns[t]=1,"meta"!==i&&n.editMap[i]&&n.editMap[i](t,o[r])),n.store.activeBtns=n.activeBtns})),B(this,"mouseUp",(function(t,e){if(n.store.lang[n.store.langIndex],n.store.getKeyContent(t).type,n.activeBtns=n.store.activeBtns,n.lastKey===t)if(n.hasControls())0===n.activeControls[t]&&(n.activeBtns[t]=0),n.lastKey=null;else for(var r=Object.keys(n.activeBtns),o=0;o<r.length;o+=1)n.activeBtns[r[o]]=0;else if(null!==n.lastKey)if(n.hasControls())0===n.activeControls[n.lastKey]&&(n.activeBtns[n.lastKey]=0),n.lastKey=null;else for(var i=Object.keys(n.activeBtns),c=0;c<i.length;c+=1)n.activeBtns[i[c]]=0;n.store.activeBtns=n.activeBtns})),B(this,"resetControls",(function(){n.activeControls={}})),B(this,"hasControls",(function(){return 0!==Object.keys(n.activeControls).filter((function(t){return 0!==n.activeControls[t]})).length})),B(this,"keyDown",(function(t){if(!n.excludeKey.includes(t)){var e=n.store.lang[n.store.langIndex],r=n.store.getKeyContent(t),o=r.type;n.activeBtns=n.store.activeBtns,"control"===o?(n.hasControls()||(n.activeControls[t]=1,n.activeBtns[t]=1),n.hasControls()&&(n.activeControls[t]||n.hasControlCombination(t)||(n.activeControls[t]=1),n.activeBtns[t]=1)):n.hasControls()?(n.hasControlCombination(t)||"meta"!==o&&n.editMap[o]&&n.editMap[o](t,r[e]),n.activeBtns[t]=1):(n.activeBtns[t]=1,"meta"!==o&&n.editMap[o]&&n.editMap[o](t,r[e])),n.store.activeBtns=n.activeBtns}})),B(this,"keyUp",(function(t){if(!n.excludeKey.includes(t)){if(n.store.lang[n.store.langIndex],n.store.getKeyContent(t).type,n.activeBtns=n.store.activeBtns,n.hasControls())n.activeBtns[t]=0,1===n.activeControls[t]&&(n.activeControls[t]=0);else{1===n.activeControls[t]&&(n.activeControls[t]=0);for(var e=Object.keys(n.activeBtns),r=0;r<e.length;r+=1)n.activeBtns[e[r]]=0}n.store.activeBtns=n.activeBtns}})),B(this,"upCursor",(function(){console.log(n.store.cursor);var t=n.store.cursor,e=t.line,r=t.pos,o=(t.number,n.store.textareaRow);if(0!==e){var i=e-1,c=0;if(i>0)for(var u=0;u<i;u++)c+=o[u].length;o[i].length>r?(c+=r,n.store.cursor={number:c,line:i,pos:r}):(c+=o[i].length-1,n.store.cursor={number:c,line:i,pos:o[i].length-1})}console.log(n.store.cursor)})),B(this,"downCursor",(function(){console.log(n.store.cursor);var t=n.store.cursor,e=t.line,r=t.pos,o=(t.number,n.store.textareaRow);if(e!==o.length-1){for(var i=e+1,c=0,u=0;u<i;u++)c+=o[u].length;if(o[i].length>r)c+=r,n.store.cursor={number:c,line:i,pos:r};else{c+=o[i].length-1;var a=o[i].length-1;n.store.cursor={number:c,line:i,pos:a}}}console.log(n.store.cursor)})),B(this,"leftCursor",(function(){var t=n.store.cursor,e=t.line,r=t.pos,o=t.number,i=n.store.textareaRow;if(0!==r||0!==e)if(r-1==0){var c=0;if(0!==e)for(var u=0;u<e;u++)c+=i[u].length;n.store.cursor={number:c,line:e,pos:0}}else if(0===r){for(var a=0,s=e-1,l=0;l<e;l++)a+=i[l].length;n.store.cursor={number:a-1,line:s,pos:i[s].length-1}}else{var f=o-1,y=r-1;n.store.cursor={number:f,line:e,pos:y}}})),B(this,"rightCursor",(function(){var t=n.store.cursor,e=t.line,r=t.pos,o=t.number,i=n.store.textareaRow;o!==n.store.textareaContent.length&&(r+1===i[e].length?n.store.cursor={number:o+1,line:e+1,pos:0}:n.store.cursor={number:o+1,line:e,pos:r+1})})),B(this,"editMap",{symbol:this.symbol,delete:this.delete,move:this.moveCursor,capslock:this.capsLock,space:this.space}),B(this,"cursorHandler",{up:this.upCursor,down:this.downCursor,left:this.leftCursor,right:this.rightCursor}),B(this,"keyHandler",{mouseDown:this.mouseDown,mouseUp:this.mouseUp}),B(this,"boardHandler",{keyHandler:this.keyHandler}),B(this,"initKeyboard",(function(t){var e={};t.forEach((function(t){e["".concat(t.code)]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)})),n.store.keys=e})),this.store=e,this.editor=new v,this.history=[],this.activeBtns={},this.lastControl={id:null,time:null},this.activeControls={},this.lastKey=null,this.newSymbol=null}var e,n;return e=t,(n=[{key:"hasControlCombination",value:function(t){var e=this,n=Object.keys(this.activeControls).filter((function(t){return 0!==e.activeControls[t]}));n.push(t);for(var r=n.map((function(t){return"ShiftLeft"===t||"ShiftRight"===t?"Shift":"AltLeft"===t||"AltRight"===t?"Alt":"ControlLeft"===t||"ControlRight"===t?"Control":t})),o=0;o<this.controlCombinations.length;o+=1)if(this.controlCombinations[o].every((function(t){return r.includes(t)}))){if(console.log(r),"ControlShift"===this.controlCombinations[o].join("")){var i=this.store.langIndex;this.store.langIndex=(i+1)%this.store.lang.length}return this.controlCombinations[o].join(""),this.controlCombinations[o]}return null}},{key:"executeCommand",value:function(t){t.execute()&&this.history.push(t)}}])&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}var I=function(){function t(e){var n=e.parent,r=void 0===n?null:n,o=e.tagName,i=void 0===o?"div":o,c=e.className,u=void 0===c?"":c,a=e.content,s=void 0===a?"":a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var l=document.createElement(i);l.classList=u,l.innerHTML=s,r&&r.append(l),this.node=l}var e,n;return e=t,(n=[{key:"destroy",value:function(){this.node.remove()}}])&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function U(t){var e=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===M(e)?e:String(e)}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(n);if(r){var o=H(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return F(t)}(this,t)});function i(t){var e,n,r,c,u=t.parent,a=t.className,s=t.lang,l=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=F(e=o.call(this,{parent:u,tagName:"header",className:"".concat(a,"__header header")})),c=function(t){e.activeLang=t,e.lang.node.textContent=e.activeLang},(r=U(r="onChangeLang"))in n?Object.defineProperty(n,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[r]=c,e.controller=l,e.activeLang=s,e.container=new I({parent:e.node,className:"header__container container"}),e.lang=new I({parent:e.container.node,className:"header__lang lang",content:e.activeLang}),e.description=new I({parent:e.container.node,className:"header__description description",content:"\n        <span>Virtual Keyboard реализована для Window OS</span>\n        <span>Для зажатия контрольной кнопки используйте двойной клик</span>\n      "}),e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(I);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function q(t){var e=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===W(e)?e:String(e)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Z(n);if(r){var o=Z(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Y(t)}(this,t)});function i(t){var e,n,r,c,u=t.parent,a=t.className;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=Y(e=o.call(this,{parent:u,tagName:"textarea",className:"".concat(a,"__textarea textarea")})),c=function(t){e.node.textContent=t,e.node.focus()},(r=q(r="setContent"))in n?Object.defineProperty(n,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[r]=c,e.node.addEventListener("keydown",(function(t){t.preventDefault()})),e.node.addEventListener("keyup",(function(t){t.preventDefault()})),e.node.focus(),e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(I);function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}function tt(t){var e=function(t,e){if("object"!==G(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===G(e)?e:String(e)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$(n);if(r){var o=$(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Q(t)}(this,t)});function i(t){var e,n,r,c,u=t.parent,a=t.className,s=t.code,l=t.content,f=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=Q(e=o.call(this,{parent:u,tagName:"button",className:"".concat(a,"__btn btn ").concat(s)})),c=function(t){e.content!==t&&(e.content=t),e.mainContent.node.textContent=e.content[0],e.beforeContent.node.textContent="".concat(2===e.content.length?e.content[1]:"")},(r=tt(r="update"))in n?Object.defineProperty(n,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[r]=c,e.code=s,e.content=l,e.controller=f,e.node.tabIndex="-1",e.beforeContent=new I({parent:e.node,tagName:"span",className:"btn__content btn__content--before"}),e.mainContent=new I({parent:e.node,tagName:"span",className:"btn__content btn__content--main"}),e.update(e.content),e.node.onmousedown=function(t){t.preventDefault(),e.controller.mouseDown(e.code,t.timeStamp),e.node.onmouseover=function(t){return e.node.onmouseup(t)}},e.node.onmouseup=function(t){e.controller.mouseUp(e.code,t.timeStamp),e.node.onmouseover=null},e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(I);function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rt(t,e)}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ot(n);if(r){var o=ot(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,c=t.content,u=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:c,controller:u})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(et);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(t,e){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ut(t,e)}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},at(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ut(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(n);if(r){var o=at(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,c=t.content,u=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:c,controller:u})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(et);function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ft(t,e)}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yt(n);if(r){var o=yt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,c=t.content,u=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:c,controller:u})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(et);function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function ht(t,e){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ht(t,e)}function mt(t){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mt(t)}var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mt(n);if(r){var o=mt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,c=t.content,u=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:c,controller:u})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(et);function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function wt(t,e){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wt(t,e)}function gt(t){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gt(t)}var Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gt(n);if(r){var o=gt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,c=t.content,u=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:c,controller:u})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(et);function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Ct(t,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ct(t,e)}function St(t){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},St(t)}var Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=St(n);if(r){var o=St(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e=t.parent,n=t.className,r=t.code,c=t.content,u=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{parent:e,className:n,code:r,content:c,controller:u})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(et);function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function xt(t,e){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xt(t,e)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}function Et(t){var e=function(t,e){if("object"!==_t(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===_t(e)?e:String(e)}var Tt={ShiftLeft:Pt,ShiftRight:Pt,ControlLeft:vt,ControlRight:vt,MetaLeft:Ot,AltLeft:it,AltRight:it,ArrowLeft:st,ArrowRight:st,CapsLook:pt},Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(n);if(r){var o=kt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Rt(t)}(this,t)});function i(t){var e,n,r,c,u=t.parent,a=t.className,s=t.lang,l=t.controller;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=Rt(e=o.call(this,{parent:u,className:"".concat(a,"__board board")})),c=function(t){e.keys=t,Object.keys(e.keys).forEach((function(t,n){var r=e.keys[t],o=r.row,i=r.code,c=Tt[i]||et;e.btns[i]=new c({parent:e.rows[o-1].node,className:"board",code:i,content:r["".concat(e.lang)].name,controller:e.controller.keyHandler})}))},(r=Et(r="init"))in n?Object.defineProperty(n,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[r]=c,e.lang=s,e.controller=l,e.rows={},e.keys={},e.btns={};for(var f=0;f<5;f+=1)e.rows[f]=new I({parent:e.node,className:"board__row row"});return e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(I);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Nt(t,e){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nt(t,e)}function Lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dt(t){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dt(t)}function It(t,e,n){return(e=Mt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mt(t){var e=function(t,e){if("object"!==Kt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Kt(e)?e:String(e)}var At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dt(n);if(r){var o=Dt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lt(t)}(this,t)});function i(t){var e,n=t.parent,r=t.className,c=t.controller;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),It(Lt(e=o.call(this,{parent:n,tagName:"main",className:"".concat(r,"__main main")})),"init",(function(t){e.board.init(t)})),It(Lt(e),"onChangeTextareaContent",(function(t){e.textarea.setContent(t)})),It(Lt(e),"onChangeCursorPosition",(function(t){var n=t.start,r=t.end;e.textarea.node.setSelectionRange(n,r)})),It(Lt(e),"onInitKeys",(function(t){e.board.init(t)})),e.controller=c,e.container=new I({parent:e.node,className:"main__container container"}),e.textarea=new z({parent:e.container.node,className:r}),e.board=new Bt({parent:e.container.node,className:r,lang:"en",controller:e.controller.boardHandler}),e.node.onmousedown=function(t){e.textarea.node.focus()},e.node.onmouseup=function(t){e.textarea.node.focus()},e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(I);function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ft(o)?o:String(o)),r)}var o}var Ut=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=[]}var e,n;return e=t,(n=[{key:"getKeysData",value:function(){var t=this;return fetch("./data/keys.json").then((function(t){return t.json()})).then((function(e){if(!Array.isArray(e))throw new Error("Data load error");return t.data=e,t.data}))}}])&&Ht(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Wt(t,e){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wt(t,e)}function Xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}function Zt(t){var e=function(t,e){if("object"!==Vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Vt(e)?e:String(e)}var qt,zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yt(n);if(r){var o=Yt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xt(t)}(this,t)});function i(t){var e,n,r,c,u=t.parent,a=t.controller,s=t.store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=Xt(e=o.call(this,{parent:u,className:"keyboard"})),c=function(){(new Ut).getKeysData().then((function(t){e.data=t,e.controller.initKeyboard(e.data)}))},(r=Zt(r="init"))in n?Object.defineProperty(n,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[r]=c,e.controller=a,e.store=s,e.data=[],e.keys=[],e.header=new V({parent:e.node,className:"keyboard",lang:"en",controller:a}),e.main=new At({parent:e.node,className:"keyboard",controller:e.controller}),document.addEventListener("keydown",(function(t){return e.controller.keyDown(t.code)}),!0),document.addEventListener("keyup",(function(t){return e.controller.keyUp(t.code)}),!0),e.store.onChangeTextareaContent.add((function(t){return e.main.onChangeTextareaContent(t)})),e.store.onChangeLang.add((function(t){return e.header.onChangeLang(t)})),e.store.onChangeCursorPosition.add((function(t){return e.main.onChangeCursorPosition(t)})),e.store.onInitKeys.add((function(t){return e.main.onInitKeys(t)})),e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(I),Gt=void new zt({parent:document.body,controller:new N(qt=new l),store:qt}).init();window.keyboard=Gt})();
//# sourceMappingURL=index.js.map